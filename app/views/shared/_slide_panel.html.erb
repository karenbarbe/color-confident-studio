<%# 
  Slide Panel Component
  
  A responsive panel: bottom sheet on mobile, side-push panel on desktop.
  
  Required locals:
    frame_id: String - The Turbo Frame ID for content (e.g., "color_detail", "palette_detail")
  
  Optional locals:
    panel_id: String - Container ID (default: "#{frame_id}-container")
    panel_class: String - Additional CSS classes for the panel
    close_callback: String - Stimulus action to call on close (e.g., "some-controller#onPanelClose")
%>

<% panel_id ||= "#{frame_id}-container" %>
<% panel_class ||= "" %>
<% close_callback ||= nil %>

<div data-controller="slide-panel"
     class="slide-panel-container"
     id="<%= panel_id %>">

  <%# Backdrop (mobile only) %>
  <div data-slide-panel-target="backdrop" 
       data-action="click->slide-panel#close"
    class="hidden fixed inset-0 bg-black/50 z-40 md:hidden">
  </div>

  <%# Panel %>
  <aside data-slide-panel-target="panel"
         class="slide-panel <%= panel_class %>">

    <%# Close button %>
    <button data-action="click->slide-panel#close <%= close_callback %>" 
      class="absolute top-4 right-4 z-10 btn btn-circle btn-ghost text-base-content/70 hover:text-base-content cursor-pointer">
      <%= icon(:x_mark_outline, css_class: "size-6") %>
    </button>

    <%# Turbo Frame for content %>
    <%= turbo_frame_tag frame_id, class: "flex flex-col flex-1 min-h-0 pt-14" %>
  </aside>
</div>
