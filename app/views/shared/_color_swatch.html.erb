<% is_in_stash = controller_name == "color_libraries" && @stashed_color_ids.include?(color.id) %>

<li class="list-none">

  <div class="w-full aspect-square rounded-lg sm:rounded-xl relative <%= 'border-2 border-gray-200' if color.oklch_l >= 0.998 %>" style="background-color: #<%= color.hex_color %>;">

    <%# Color library view badge %>
    <% if view_context == 'library' && is_in_stash %>
      <div class="absolute bottom-1.5 left-1.5 sm:bottom-2 sm:left-2 size-6 sm:size-7 flex justify-center items-center rounded-full bg-white/85">
        <div class="size-3.5 sm:size-4 flex justify-center items-center text-gray-700">
          <%= icon (:heart_solid) %>
        </div>
      </div>
    <% end %>

    <%# Stash view badge %>
    <% if view_context == "stash" && defined?(ownership_status) && ownership_status.present? %>
      <div class="absolute bottom-1.5 left-1.5 sm:bottom-2 sm:left-2 h-5 sm:h-5.5 px-1.5
        flex justify-center items-center gap-1 rounded bg-white/75">

        <% if ownership_status == "owned" %>
          <span class="text-xs font-semibold text-gray-700">MINE</span>

        <% elsif ownership_status == "wish_list" %>
          <span class="text-xs font-semibold text-gray-500">WANT</span>

        <% end %>
      </div>
    <% end %>
  </div>

  <%# Color info %>
  <div class="mt-1 sm:mt-1.5 px-0.5">
    <p class="text-sm font-semibold text-gray-900 truncate"><%= color.vendor_code %></p>
    <p class="text-xs sm:text-sm text-gray-500 truncate leading-tight"><%= color.name %></p>
  </div>

</li>
