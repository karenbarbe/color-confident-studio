<%# locals: (palette:) %>

<div class="bg-base-100 rounded-xl shadow-sm overflow-hidden border border-base-200">
  <%# Color preview strip %>
  <div class="h-16 flex">
    <%# Background color (40% width) %>
    <% if palette.background_slots.any? %>
      <% color = palette.background_slots.first.product_color %>
      <div class="w-2/5 h-full" style="background-color: #<%= color.hex_color %>;"></div>
    <% else %>
      <div class="w-2/5 h-full bg-base-100/20 flex items-center justify-center">
        <span class="text-xs text-base-content/50">No fabric yet</span>
      </div>
    <% end %>

    <%# Thread colors (60% width) %>
    <div class="w-3/5 flex">
      <% palette.thread_slots.each do |slot| %>
        <div class="flex-1 h-full" style="background-color: #<%= slot.product_color.hex_color %>;"></div>
      <% end %>
      <% if palette.thread_slots.empty? %>
        <div class="flex-1 h-full bg-base-100/10 flex items-center justify-center">
          <span class="text-xs text-base-content/50">No threads yet</span>
        </div>
      <% end %>
    </div>
  </div>

  <%# Card content %>
  <div class="p-4">
    <div class="flex justify-between items-start">
      <div class="min-w-0 flex-1">
        <h3 class="font-semibold text-base-content truncate">
          <%= palette.name.presence || "Untitled palette" %>
        </h3>
        <p class="text-sm text-base-content/70">
          <%= palette.color_slots.length %> colors
        </p>
      </div>

      <% if palette.complete? %>
        <%= link_to edit_palette_path(palette), class: "btn btn-sm btn-ghost" do %>
          View
        <% end %>
      <% else %>
        <%= link_to edit_palette_path(palette), class: "btn btn-sm btn-ghost" do %>
          Continue
        <% end %>
      <% end %>
    </div>
  </div>
</div>
