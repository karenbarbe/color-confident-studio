<%# locals: (palette:, is_draft: false) %>

<div class="bg-base-100 rounded-xl shadow-sm overflow-hidden border border-base-200">
  <%# Color preview strip %>
  <div class="h-16 flex">
    <% if palette.background_color %>
      <div class="w-1/4 h-full" style="background-color: #<%= palette.background_color.hex_color %>;"></div>
    <% else %>
      <div class="w-1/4 h-full bg-gray-100 flex items-center justify-center">
        <span class="text-xs text-gray-400">BG</span>
      </div>
    <% end %>

    <div class="flex-1 flex">
      <% palette.main_slots.limit(3).each do |slot| %>
        <div class="flex-1 h-full" style="background-color: #<%= slot.product_color.hex_color %>;"></div>
      <% end %>
      <% (3 - palette.main_slots.count).times do %>
        <div class="flex-1 h-full bg-gray-50"></div>
      <% end %>
    </div>
  </div>

  <%# Card content %>
  <div class="p-4">
    <div class="flex justify-between items-start">
      <div class="min-w-0 flex-1">
        <h3 class="font-semibold text-gray-900 truncate">
          <%= palette.name.presence || "Untitled palette" %>
        </h3>
        <p class="text-sm text-gray-500">
          <%= palette.color_slots.count %> colors
          <% if is_draft %>
            <span class="text-amber-600">â€¢ Draft</span>
          <% end %>
        </p>
      </div>

      <% if is_draft %>
        <%= link_to studio_palette_path(palette), class: "btn btn-sm btn-ghost" do %>
          Continue
        <% end %>
      <% else %>
        <%= link_to palette, class: "btn btn-sm btn-ghost" do %>
          View
        <% end %>
      <% end %>
    </div>
  </div>
</div>
