<% content_for :title, @palette.name.presence || "Palette" %>

<div class="mx-auto w-full mt-8 pb-8 space-y-6">

  <%# Header %>
  <div class="flex justify-between items-start">
    <div>
      <h1 class="font-bold text-2xl text-base-content"><%= @palette.name.presence || "Untitled palette" %></h1>
      <% if @palette.description.present? %>
        <p class="text-base-content/70 mt-1"><%= @palette.description %></p>
      <% end %>
    </div>
  </div>

  <%# Full palette preview %>
  <div class="bg-base-100">
    <div class="p-4 md:p-8" style="background-color: #<%= @palette.background_color&.hex_color || 'f5f5f5' %>;">
      <div class="flex gap-1 md:gap-2">
        <% @palette.thread_slots.each do |slot| %>
          <div class="w-full aspect-1/4 min-w-0 max-w-16 rounded-full"
               style="background-color: #<%= slot.product_color.hex_color %>;"
               title="<%= slot.product_color.vendor_code %>">
          </div>
        <% end %>
      </div>
    </div>
  </div>

  <%# Color list %>
  <div class="bg-base-100 rounded-xl p-5 space-y-6">

    <%# Background %>
    <% if @palette.background_color %>
      <div>
        <h3 class="text-sm font-semibold uppercase text-base-content/70 mb-2">Background</h3>
        <ul class="divide-y divide-base-content/5">
          <%= render partial: "palettes/color_list_item", 
                     locals: { color: @palette.background_color, 
                               stash_item: @stash_items_by_color_id[@palette.background_color.id] } %>
        </ul>
      </div>
    <% end %>

    <%# Thread colors %>
    <% if @palette.thread_slots.any? %>
      <div>
        <h3 class="text-sm font-semibold uppercase text-base-content/70 mb-2">Thread colors</h3>
        <ul class="divide-y divide-base-content/5">
          <% @palette.thread_slots.each do |slot| %>
            <%= render partial: "palettes/color_list_item", 
                       locals: { color: slot.product_color, 
                                 stash_item: @stash_items_by_color_id[slot.product_color.id] } %>
          <% end %>
        </ul>
      </div>
    <% end %>

  </div>

</div>
