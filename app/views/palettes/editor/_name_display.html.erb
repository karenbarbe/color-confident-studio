<%# locals: (palette:) %>

<div class="flex items-center gap-3" data-palette-editor-target="nameContainer">
  <h1 class="font-bold text-3xl text-base-content"
      data-palette-editor-target="nameDisplay"
      data-action="click->palette-editor#editName">
    <%= palette.name.presence || "Untitled palette" %>
  </h1>
  <%= button_tag type: "button",
               class: "text-base-content/50 hover:text-base-content transition-colors cursor-pointer",
               data: { action: "click->palette-editor#editName" },
               title: "Edit name" do %>
    <%= icon(:pencil_outline, class: "size-6") %>
  <% end %>

  <%# Hidden form for inline editing %>
  <%= form_with model: palette, 
      url: palette_path(palette), 
      method: :patch,
      class: "hidden items-center gap-2",
      data: { 
        palette_editor_target: "nameForm",
        turbo_frame: "_top"
      } do |f| %>
    <%= f.text_field :name, 
        value: palette.name.presence || "Untitled palette",
        class: "font-bold text-3xl text-base-content bg-transparent border-b-2 border-zinc-300 focus:border-base-content focus:outline-none px-0 py-0 w-64",
        data: { 
          palette_editor_target: "nameInput", 
          action: "keydown->palette-editor#handleNameKeydown" 
        } %>
    <button type="submit" class="text-base-content/50 hover:text-base-content/70">
      <svg xmlns="http://www.w3.org/2000/svg" class="size-5" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" />
      </svg>
    </button>
    <button type="button" class="text-zinc-400 hover:text-zinc-600" data-action="click->palette-editor#cancelNameEdit">
      <svg xmlns="http://www.w3.org/2000/svg" class="size-5" viewBox="0 0 20 20" fill="currentColor">
        <path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" />
      </svg>
    </button>
  <% end %>
</div>
