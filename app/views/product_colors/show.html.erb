<div class="container mx-auto mt-8 space-y-6">
  <div class="mx-auto w-sm space-y-4">
    <%= render @product_color %>

    <% stash_item = Current.user.stash_items.find_by(product_color_id: @product_color.id) %>
    <% if stash_item %>

      <%= button_to "Remove from stash", stash_item_path(stash_item), method: :delete, params: { stash_item: { product_color_id: @product_color.id } }, class: "btn btn-outline" %>

      <%= button_to toggle_favorite_stash_item_path(stash_item), method: :patch, class: "btn" do %>
        <%= icon(stash_item.favorite? ? :heart_solid : :heart_outline) %>
      <% end %>
      <p class="text-green-700"><%= stash_item.ownership_status %></p>

      <%= form_with model: stash_item, method: :patch do |f| %>
        <%= f.select :ownership_status, 
               [['Owned', 'owned'], ['Wish List', 'wish_list']],
               { prompt: "Select ownership status..." },
               { class: "select select-neutral", required: true } %>
        <%= f.submit "Update", class: "btn" %>
      <% end %>

    <% else %>
      <%= button_to "Add to my stash", stash_items_path, params: { stash_item: { product_color_id: @product_color.id } }, class: "btn btn-outline" %>
    <% end %>

  </div>
</div>
